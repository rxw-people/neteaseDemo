(this.webpackJsonpeasemusic=this.webpackJsonpeasemusic||[]).push([[0],{39:function(t,e,s){},40:function(t,e,s){},42:function(t,e,s){},50:function(t,e,s){},51:function(t,e,s){},52:function(t,e,s){},53:function(t,e,s){},54:function(t,e,s){},55:function(t,e,s){},58:function(t,e,s){"use strict";s.r(e);var n=s(0),i=s(1),a=s(15),c=s.n(a),l=s(10),o=s(6),r=s(7),d=s(9),h=s(8),u=s(3),j=s(67),m=s(68),b=s(69),p=s(70),f=s(71),O=s(65),g=s(72),x=s(73),y=s(62),v=s(74),k=s(75),S=s(76),N=(s(39),s(40),s(27)),C=s.n(N),w=(s(41),s(42),s(60)),L=s(61),D=s(63),E=s(64),T=s(59),U=s(28);function I(t,e,s,n,i){return{type:"SONGER",payload:{id:t,songSheetId:e,singerName:s,songerName:n,songImg:i}}}var B=Object(U.a)((function(){var t=arguments.length>1?arguments[1]:void 0;return{songerSing:t.payload}})),H=function(t){Object(d.a)(s,t);var e=Object(h.a)(s);function s(t){var n;return Object(o.a)(this,s),(n=e.call(this,t)).bindHandleScroll=function(t){var e=!!t.srcElement&&t.srcElement.scrollTop||window.pageYOffset;console.log(e),t.preventDefault(),t.stopPropagation(),e>=10?n.setState({isBool:!1,inlines:"none",nones:"1",backColor:"red"}):n.setState({isBool:!0,inlines:"inline",nones:"0",backColor:""}),n.setState({scrollTop:e/20+"rem"})},n.state={id:n.props.match.params.id,data:[],userObj:{},dataList:[],isBool:!0,inlines:"inline",nones:"0",backColor:"",isListDetail:!1,scrollTop:""},n}return Object(r.a)(s,[{key:"gotoUp",value:function(){var t=this;setTimeout((function(){t.props.history.go(-1)}),300),this.setState({isListDetail:!this.state.isListDetail})}},{key:"render",value:function(){var t=this;return Object(n.jsx)(T.a,{in:this.state.isListDetail,timeout:2e3,classNames:"listDetail",children:Object(n.jsxs)("div",{className:"listDetails",children:[Object(n.jsx)("img",{className:"listDetails-img",src:this.state.data.coverImgUrl,alt:""}),Object(n.jsxs)("header",{className:"listDetails-header",style:{marginTop:this.state.scrollTop,backgroundColor:this.state.backColor},children:[Object(n.jsx)(w.a,{onClick:function(){return t.gotoUp()},style:{backgroundColor:this.state.backColor}}),Object(n.jsx)("span",{style:{display:this.state.inlines},children:"\u6b4c\u5355"}),Object(n.jsx)("marquee",{style:{opacity:this.state.nones},children:Object(n.jsx)("span",{children:this.state.data.name})})]}),Object(n.jsxs)("div",{className:"listDetails-details",children:[Object(n.jsxs)("div",{className:"listDetails-details-top",children:[Object(n.jsx)("img",{src:this.state.data.coverImgUrl,alt:""}),Object(n.jsxs)("span",{children:[Object(n.jsx)("i",{className:"el-icon-headset"}),this.state.data.playCount]}),Object(n.jsx)("p",{children:this.state.data.name}),Object(n.jsxs)("p",{children:[Object(n.jsx)("img",{src:this.state.userObj.avatarUrl,alt:""}),this.state.userObj.nickname]})]}),Object(n.jsxs)("div",{className:"listDetails-details-bottom",children:[Object(n.jsxs)("div",{children:[Object(n.jsx)(L.a,{}),Object(n.jsx)("p",{children:"\u8bc4\u8bba"})]}),Object(n.jsxs)("div",{children:[Object(n.jsx)(y.a,{}),Object(n.jsx)("p",{children:"\u70b9\u8d5e"})]}),Object(n.jsxs)("div",{children:[Object(n.jsx)(D.a,{}),Object(n.jsx)("p",{children:"\u6536\u85cf"})]}),Object(n.jsxs)("div",{children:[Object(n.jsx)(E.a,{}),Object(n.jsx)("p",{children:"\u66f4\u591a"})]})]})]}),Object(n.jsxs)("ul",{className:"listDetails-list",children:[Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{children:[Object(n.jsx)(O.a,{}),Object(n.jsx)("span",{children:"\u64ad\u653e\u5168\u90e8"}),Object(n.jsxs)("span",{children:["(\u5171",this.state.dataList.length,"\u9996)"]})]}),Object(n.jsxs)("div",{children:[Object(n.jsx)(D.a,{}),Object(n.jsx)("span",{children:"\u6536\u85cf(0\u4e07)"})]})]}),this.state.dataList.map((function(e,s){return Object(n.jsxs)("li",{onClick:function(){return t.addAudio(e.id,e.name,e.ar[0].name,e.al.picUrl)},children:[Object(n.jsx)("p",{children:s+1}),Object(n.jsxs)("div",{children:[Object(n.jsx)("p",{children:e.name}),Object(n.jsxs)("p",{children:[e.ar[0].name," - ",e.al.name]})]})]},e.id)}))]})]})})}},{key:"componentDidMount",value:function(){var t=this;fetch("http://127.0.0.1:9999/playlist/detail?id="+this.state.id).then((function(t){return t.json()})).then((function(e){String(e.playlist.playCount).length>4&&(e.playlist.playCount=String(e.playlist.playCount).substr(0,String(e.playlist.playCount).length-4)+"\u4e07"),t.setState({data:e.playlist,dataList:e.playlist.tracks,userObj:e.playlist.creator},(function(){console.log(t.state.dataList)}))})),window.addEventListener("scroll",this.bindHandleScroll,!0),this.setState({isListDetail:!0}),this.listener1=B.subscribe((function(){}))}},{key:"addAudio",value:function(t,e,s,n){B.dispatch(I(t,this.state.id,e,s,n))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.bindHandleScroll,!0),this.listener1()}}]),s}(i.Component),A=function(t){Object(d.a)(s,t);var e=Object(h.a)(s);function s(t){var n;return Object(o.a)(this,s),(n=e.call(this,t)).bindHandleScroll=function(t){var e=!!t.srcElement&&t.srcElement.scrollTop||window.pageYOffset;console.log(e)},console.log(n.props),n.state={data:[],songList:[],id:""},n}return Object(r.a)(s,[{key:"render",value:function(){return Object(n.jsxs)("div",{className:"recommend",children:[Object(n.jsxs)("div",{className:"recommend-chart",children:[Object(n.jsx)("div",{}),Object(n.jsxs)("div",{className:"swiper-container",children:[Object(n.jsx)("div",{className:"swiper-wrapper",children:this.state.data.map((function(t,e){return Object(n.jsx)("div",{className:"swiper-slide",children:Object(n.jsx)("img",{src:t.imageUrl,alt:""})},e)}))}),Object(n.jsx)("div",{className:"swiper-pagination"})]})]}),Object(n.jsx)("p",{className:"recommend-song",children:"\u63a8\u8350\u6b4c\u5355"}),Object(n.jsx)("div",{className:"recommend-songList",children:Object(n.jsx)("ul",{children:this.state.songList.map((function(t,e){return Object(n.jsx)("li",{className:"recommend-songList-list",children:Object(n.jsxs)(l.b,{to:"/recommend/listDetails/".concat(t.id),children:[Object(n.jsx)("img",{src:t.picUrl,alt:""}),Object(n.jsx)("p",{children:t.name}),Object(n.jsxs)("span",{children:[Object(n.jsx)("i",{className:"el-icon-headset"}),t.playCount]})]})},e)}))})}),Object(n.jsx)("section",{})]})}},{key:"componentWillUnmount",value:function(){this.swiper.destroy()}},{key:"initSwiper",value:function(){this.swiper=new C.a(".swiper-container",{pagination:".swiper-pagination",paginationClickable:!0,loop:!0,autoplay:3e3})}},{key:"componentDidMount",value:function(){var t=this;fetch("http://127.0.0.1:9999/banner").then((function(t){return t.json()})).then((function(e){t.setState({data:e.banners},(function(){t.initSwiper()}))})),fetch("http://127.0.0.1:9999/personalized").then((function(t){return t.json()})).then((function(e){console.log(e.result),e.result.forEach((function(t,e){String(t.playCount).length>4&&(t.playCount=String(t.playCount).substr(0,String(t.playCount).length-4)+"\u4e07")})),t.setState({songList:e.result})})),window.addEventListener("scroll",this.bindHandleScroll,!0)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.bindHandleScroll,!0)}}]),s}(i.Component),M=s(24),R=(s(50),function(t){Object(d.a)(s,t);var e=Object(h.a)(s);function s(t){var n;return Object(o.a)(this,s),(n=e.call(this,t)).handleSong=function(t){var e=!!t.srcElement&&t.srcElement.documentElement.scrollTop||window.pageYOffset||(t.srcElement?t.srcElement.body.scrollTop:0);t.srcElement.documentElement.scrollHeight==t.srcElement.documentElement.clientHeight+e&&fetch("http://127.0.0.1:9999/top/artists?offset="+n.state.data.length,{method:"get"}).then((function(t){return t.json()})).then((function(t){console.log(t),n.setState({data:[].concat(Object(M.a)(n.state.data),Object(M.a)(t.artists))},(function(){console.log(n.state.data)}))}))},n.state={data:[],hotSort:[{name:"\u534e\u8bed\u7537",id:1001},{name:"\u534e\u8bed\u5973",id:1002},{name:"\u534e\u8bed\u7ec4\u5408",id:1003},{name:"\u6b27\u7f8e\u7537",id:2001},{name:"\u6b27\u7f8e\u5973",id:2002},{name:"\u6b27\u7f8e\u7ec4\u5408",id:2003},{name:"\u65e5\u672c\u7537",id:6001},{name:"\u65e5\u672c\u5973",id:6002},{name:"\u65e5\u672c\u7ec4\u5408",id:6003},{name:"\u97e9\u56fd\u7537",id:7001},{name:"\u97e9\u56fd\u5973",id:7002},{name:"\u97e9\u56fd\u7ec4\u5408",id:7003},{name:"\u5176\u4ed6\u7537\u6b4c\u624b",id:4001},{name:"\u5176\u4ed6\u7537\u6b4c\u624b",id:4002},{name:"\u5176\u4ed6\u7ec4\u5408",id:4003}],letterArr:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],letters:"",sorts:""},n}return Object(r.a)(s,[{key:"sort",value:function(t){var e=this;this.setState({sorts:t.id},(function(){fetch("http://127.0.0.1:9999/artist/list?cat=".concat(e.state.sorts,"&initial=").concat(e.state.letters,"&offset=0")).then((function(t){return t.json()})).then((function(t){e.setState({data:t.artists})}))}))}},{key:"letter",value:function(t){var e=this;this.setState({letters:t},(function(){fetch("http://127.0.0.1:9999/artist/list?cat=".concat(e.state.sorts,"&initial=").concat(e.state.letters,"&offset=0")).then((function(t){return t.json()})).then((function(t){e.setState({data:t.artists})}))}))}},{key:"render",value:function(){var t=this;return Object(n.jsxs)("div",{className:"singers",children:[Object(n.jsxs)("div",{className:"singers-sort",children:[Object(n.jsx)("span",{children:"\u5206\u7c7b(\u9ed8\u8ba4\u70ed\u95e8):"}),this.state.hotSort.map((function(e,s){return Object(n.jsx)("span",{className:t.state.sorts==e.id?"bor":"",onClick:function(){return t.sort(e)},children:e.name},s)}))]}),Object(n.jsxs)("div",{className:"singers-letter",children:[Object(n.jsx)("span",{children:"\u9996\u5b57\u6bcd:"}),this.state.letterArr.map((function(e,s){return Object(n.jsx)("span",{className:t.state.letters==e?"der":"",onClick:function(){return t.letter(e)},children:e},s)}))]}),Object(n.jsx)("div",{className:"singers-list",children:this.state.data.map((function(t,e){return Object(n.jsx)("div",{children:Object(n.jsxs)(l.b,{to:"/singers/singersDetails/".concat(t.id),children:[Object(n.jsx)("img",{src:t.img1v1Url,alt:""}),Object(n.jsx)("span",{children:t.name})]})},t.id)}))})]})}},{key:"componentDidMount",value:function(){var t=this;fetch("http://127.0.0.1:9999/top/artists?offset=0",{method:"get"}).then((function(t){return t.json()})).then((function(e){console.log(e),t.setState({data:e.artists})})),window.addEventListener("scroll",this.handleSong)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleSong)}}]),s}(i.Component)),V=(s(51),function(t){Object(d.a)(s,t);var e=Object(h.a)(s);function s(t){var n;return Object(o.a)(this,s),(n=e.call(this,t)).state={officialRank:[],officialList:[]},n}return Object(r.a)(s,[{key:"render",value:function(){return Object(n.jsxs)("div",{className:"rank",children:[Object(n.jsxs)("div",{className:"rank-officialRank",children:[Object(n.jsx)("p",{children:"\u5b98\u65b9\u699c"}),this.state.officialRank.map((function(t,e){return Object(n.jsx)("div",{children:Object(n.jsxs)(l.b,{to:"/rank/RankDetails/"+t.id,children:[Object(n.jsxs)("div",{className:"rank-officialRank-left",children:[Object(n.jsx)("img",{src:t.coverImgUrl,alt:""}),Object(n.jsx)("span",{children:t.updateFrequency})]}),Object(n.jsx)("ol",{className:"rank-officialRank-right",children:t.tracks.map((function(t,e){return Object(n.jsxs)("li",{children:[Object(n.jsxs)("span",{children:[t.first," - "]}),Object(n.jsx)("span",{children:t.second})]},e)}))})]})},t.id)}))]}),Object(n.jsx)("p",{className:"rank-p",children:"\u5168\u7403\u699c"}),Object(n.jsx)("div",{children:Object(n.jsx)("ul",{className:"rank-officialList",children:this.state.officialList.map((function(t,e){return Object(n.jsx)("li",{children:Object(n.jsxs)(l.b,{to:"/rank/RankDetails/"+t.id,children:[Object(n.jsx)("img",{src:t.coverImgUrl,alt:""}),Object(n.jsx)("span",{children:t.updateFrequency})]})},t.id)}))})})]})}},{key:"componentDidMount",value:function(){var t=this;fetch("http://127.0.0.1:9999/toplist/detail",{method:"get"}).then((function(t){return t.json()})).then((function(e){console.log(e.list),t.setState({officialRank:e.list.splice(0,4),officialList:e.list},(function(){console.log(t.state)}))}))}}]),s}(i.Component)),q=(s(52),s(66)),W=function(t){Object(d.a)(s,t);var e=Object(h.a)(s);function s(t){var n;return Object(o.a)(this,s),(n=e.call(this,t)).state={data:[],songArr:[],singersArr:[],songSheet:[],closeStyle:"none",listStyle:"none",inpValue:""},n}return Object(r.a)(s,[{key:"searchs",value:function(t){var e=this;console.log(t.target.value.length),t.target.value.length?(this.setState({closeStyle:"inline"}),fetch("http://127.0.0.1:9999/search/suggest?keywords="+t.target.value,{method:"get"}).then((function(t){return t.json()})).then((function(t){console.log(t),e.setState({singersArr:t.result.artists||[],songSheet:t.result.playlists||[]})})),fetch("http://127.0.0.1:9999/search?keywords="+t.target.value,{method:"get"}).then((function(t){return t.json()})).then((function(t){console.log(t),e.setState({songArr:t.result.songs||[]})}))):this.setState({closeStyle:"none"}),this.setState({inpValue:t.target.value})}},{key:"closeClick",value:function(){this.setState({closeStyle:"none",inpValue:""})}},{key:"liClick",value:function(t){var e=this;this.setState({inpValue:t.first},(function(){""!=e.state.inpValue?e.setState({closeStyle:"inline"}):e.setState({closeStyle:"none"})})),fetch("http://127.0.0.1:9999/search/suggest?keywords="+t.first,{method:"get"}).then((function(t){return t.json()})).then((function(t){console.log(t),e.setState({songArr:t.result.songs||[]})}))}},{key:"goUp",value:function(){this.props.history.go(-1)}},{key:"toSinger",value:function(t){this.props.history.push("/singers/singersDetails/"+t)}},{key:"toSongSheet",value:function(t){this.props.history.push("/rank/RankDetails/"+t)}},{key:"playSong",value:function(t,e,s,n){B.dispatch(I(t,B.getState().songSheetId,e,s,n))}},{key:"render",value:function(){var t=this;return Object(n.jsxs)("div",{className:"search",children:[Object(n.jsxs)("header",{className:"search-header",children:[Object(n.jsx)(w.a,{onClick:function(){return t.goUp()}}),Object(n.jsx)("input",{type:"text",value:this.state.inpValue,onChange:function(e){return t.searchs(e)},placeholder:"\u641c\u7d22\u6b4c\u66f2\u3001\u6b4c\u624b\u3001\u4e13\u8f91"}),Object(n.jsx)(q.a,{style:{display:this.state.closeStyle},onClick:function(){return t.closeClick()}})]}),Object(n.jsxs)("div",{className:"search_main",style:{display:""==this.state.inpValue?"block":"none"},children:[Object(n.jsx)("p",{children:"\u70ed\u95e8\u641c\u7d22"}),this.state.data.map((function(e,s){return Object(n.jsx)("li",{onClick:function(){return t.liClick(e)},children:e.first},s)}))]}),Object(n.jsxs)("div",{className:"search-singers",style:{display:""==this.state.inpValue?"none":"block"},children:[Object(n.jsxs)("ul",{className:"search-singers-singers",children:[Object(n.jsx)("p",{style:{display:0==this.state.singersArr.length?"none":"block"},children:"\u76f8\u5173\u6b4c\u624b"}),this.state.singersArr.map((function(e,s){return Object(n.jsxs)("li",{onClick:function(){return t.toSinger(e.id)},children:[Object(n.jsx)("img",{src:e.img1v1Url,alt:""}),Object(n.jsxs)("span",{children:["\u6b4c\u624b\uff1a",e.name]})]},e.id)}))]}),Object(n.jsxs)("ul",{className:"search-singers-singers",children:[Object(n.jsx)("p",{style:{display:0==this.state.singersArr.length?"none":"block"},children:"\u76f8\u5173\u6b4c\u5355"}),this.state.songSheet.map((function(e,s){return Object(n.jsxs)("li",{onClick:function(){return t.toSongSheet(e.id)},children:[Object(n.jsx)("img",{src:e.coverImgUrl,alt:""}),Object(n.jsxs)("span",{children:["\u6b4c\u5355\uff1a",e.name]})]},e.id)}))]}),Object(n.jsx)("ul",{className:"search-singers-song",children:this.state.songArr.map((function(e,s){return Object(n.jsxs)("li",{onClick:function(){return t.playSong(e.id,e.album.artist.name,e.name,e.album.artist.img1v1Url)},children:[Object(n.jsx)("p",{children:e.name}),Object(n.jsxs)("span",{children:[e.artists[0].name," - "]}),Object(n.jsx)("span",{children:e.name})]},e.id)}))})]})]})}},{key:"componentDidMount",value:function(){var t=this;fetch("http://127.0.0.1:9999/search/hot").then((function(t){return t.json()})).then((function(e){t.setState({data:e.result.hots})}))}}]),s}(i.Component),Y=(s(53),function(t){Object(d.a)(s,t);var e=Object(h.a)(s);function s(t){var n;return Object(o.a)(this,s),(n=e.call(this,t)).singersDetailsHandle=function(t){(!!t.srcElement&&t.srcElement.scrollTop||window.pageYOffset)>=10?n.setState({opacitys:"0.5"}):n.setState({opacitys:"1"})},console.log(n.props.match.params.id),n.state={dataImg:"",data:[],opacitys:"1",isListDetail:!1},n}return Object(r.a)(s,[{key:"gotoUp",value:function(){this.props.history.go(-1)}},{key:"addSingerSong",value:function(t,e,s,n){B.dispatch(I(t,this.props.match.params.id,e,s,n))}},{key:"render",value:function(){var t=this;return Object(n.jsx)(T.a,{in:this.state.isListDetail,timeout:2e3,classNames:"listDetail",children:Object(n.jsxs)("div",{className:"singersDetails",children:[Object(n.jsx)("img",{className:"singersDetails-img",src:this.state.dataImg.img1v1Url,alt:""}),Object(n.jsxs)("header",{className:"singersDetails-header",children:[Object(n.jsx)("img",{src:this.state.dataImg.img1v1Url,alt:""}),Object(n.jsx)(w.a,{onClick:function(){return t.gotoUp()}}),this.state.dataImg.name]}),Object(n.jsxs)("div",{className:"singersDetails-collect",style:{opacity:this.state.opacitys},children:[Object(n.jsx)(D.a,{}),"\u6536\u85cf"]}),Object(n.jsxs)("ul",{className:"singersDetails-list",children:[Object(n.jsxs)("div",{children:[Object(n.jsx)(O.a,{}),Object(n.jsx)("span",{children:"\u64ad\u653e\u5168\u90e8"}),Object(n.jsxs)("span",{children:["(\u5171",this.state.data.length,"\u9996)"]})]}),this.state.data.map((function(e,s){return Object(n.jsxs)("li",{onClick:function(){return t.addSingerSong(e.id,e.name,e.ar[0].name,e.al.picUrl)},children:[Object(n.jsx)("p",{children:s+1}),Object(n.jsxs)("div",{children:[Object(n.jsx)("p",{children:e.name}),Object(n.jsxs)("p",{children:[e.ar[0].name," - ",e.al.name]})]})]},e.id)}))]})]})})}},{key:"componentDidMount",value:function(){var t=this;fetch("http://127.0.0.1:9999/artists?id="+this.props.match.params.id,{method:"get"}).then((function(t){return t.json()})).then((function(e){console.log(e),t.setState({dataImg:e.artist,data:e.hotSongs})})),window.addEventListener("scroll",this.singersDetailsHandle,!0),this.setState({isListDetail:!this.state.isListDetail})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.singersDetailsHandle,!0)}}]),s}(i.Component)),Z=(s(54),function(t){Object(d.a)(s,t);var e=Object(h.a)(s);function s(t){var n;return Object(o.a)(this,s),(n=e.call(this,t)).bindHandleScroll=function(t){(!!t.srcElement&&t.srcElement.scrollTop||window.pageYOffset)>=10?n.setState({isBool:!1,inlines:"none",nones:"inline",backColor:"red"}):n.setState({isBool:!0,inlines:"inline",nones:"none",backColor:""})},n.state={id:n.props.match.params.id,data:[],userObj:{},dataList:[],isBool:!0,inlines:"inline",nones:"none",backColor:"",isListDetail:!1},n}return Object(r.a)(s,[{key:"gotoUp",value:function(){var t=this;setTimeout((function(){t.props.history.go(-1)}),300),this.setState({isListDetail:!this.state.isListDetail})}},{key:"render",value:function(){var t=this;return Object(n.jsx)(T.a,{in:this.state.isListDetail,timeout:2e3,classNames:"rankDetail",children:Object(n.jsxs)("div",{className:"rankDetails",ref:"bodyBox",children:[Object(n.jsx)("img",{className:"rankDetails-img",src:this.state.data.coverImgUrl,alt:""}),Object(n.jsxs)("header",{className:"rankDetails-header",style:{backgroundColor:this.state.backColor},children:[Object(n.jsx)(w.a,{onClick:function(){return t.gotoUp()},style:{backgroundColor:this.state.backColor}}),Object(n.jsx)(T.a,{in:this.state.isBool,timeout:3e3,classNames:"fade",children:Object(n.jsx)("span",{style:{display:this.state.inlines},children:"\u6b4c\u5355"})}),Object(n.jsx)(T.a,{in:this.state.isBool,timeout:3e3,classNames:"fade",children:Object(n.jsx)("span",{style:{display:this.state.nones},children:this.state.data.name})})]}),Object(n.jsxs)("div",{className:"rankDetails-details",children:[Object(n.jsxs)("div",{className:"rankDetails-details-top",children:[Object(n.jsx)("img",{src:this.state.data.coverImgUrl,alt:""}),Object(n.jsxs)("span",{children:[Object(n.jsx)("i",{className:"el-icon-headset"}),this.state.data.playCount]}),Object(n.jsx)("p",{children:this.state.data.name}),Object(n.jsxs)("p",{children:[Object(n.jsx)("img",{src:this.state.userObj.avatarUrl,alt:""}),this.state.userObj.nickname]})]}),Object(n.jsxs)("div",{className:"rankDetails-details-bottom",children:[Object(n.jsxs)("div",{children:[Object(n.jsx)(L.a,{}),Object(n.jsx)("p",{children:"\u8bc4\u8bba"})]}),Object(n.jsxs)("div",{children:[Object(n.jsx)(y.a,{}),Object(n.jsx)("p",{children:"\u70b9\u8d5e"})]}),Object(n.jsxs)("div",{children:[Object(n.jsx)(D.a,{}),Object(n.jsx)("p",{children:"\u6536\u85cf"})]}),Object(n.jsxs)("div",{children:[Object(n.jsx)(E.a,{}),Object(n.jsx)("p",{children:"\u66f4\u591a"})]})]})]}),Object(n.jsxs)("ul",{className:"rankDetails-list",children:[Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{children:[Object(n.jsx)(O.a,{}),Object(n.jsx)("span",{children:"\u64ad\u653e\u5168\u90e8"}),Object(n.jsxs)("span",{children:["(\u5171",this.state.dataList.length,"\u9996)"]})]}),Object(n.jsxs)("div",{children:[Object(n.jsx)(D.a,{}),Object(n.jsx)("span",{children:"\u6536\u85cf(0\u4e07)"})]})]}),this.state.dataList.map((function(e,s){return Object(n.jsxs)("li",{onClick:function(){return t.addRankSong(e.id,e.name,e.ar[0].name,e.al.picUrl)},children:[Object(n.jsx)("p",{children:s+1}),Object(n.jsxs)("div",{children:[Object(n.jsx)("p",{children:e.name}),Object(n.jsxs)("p",{children:[e.ar[0].name," - ",e.al.name]})]})]},e.id)}))]})]})})}},{key:"componentDidMount",value:function(){var t=this;fetch("http://127.0.0.1:9999/playlist/detail?id="+this.state.id).then((function(t){return t.json()})).then((function(e){console.log(e),String(e.playlist.playCount).length>4&&(e.playlist.playCount=String(e.playlist.playCount).substr(0,String(e.playlist.playCount).length-4)+"\u4e07"),t.setState({data:e.playlist,dataList:e.playlist.tracks,userObj:e.playlist.creator})})),window.addEventListener("scroll",this.bindHandleScroll,!0),this.setState({isListDetail:!0}),this.rankListerens=B.subscribe((function(){}))}},{key:"addRankSong",value:function(t,e,s,n){B.dispatch(I(t,this.state.id,e,s,n))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.bindHandleScroll,!0),this.rankListerens()}}]),s}(i.Component)),P=s.p+"static/media/1.49129d00.png",X=s.p+"static/media/2.3ac52608.png",F=function(t){Object(d.a)(s,t);var e=Object(h.a)(s);function s(t){var i;return Object(o.a)(this,s),(i=e.call(this,t)).state={id:{},Bool:!0,titles:"\u63a8\u8350",dataList:[],dataListArr:[],shows:"inline",hiddens:"none",animations:"shows 7s linear infinite forwards",songData:[],songTimes:[],songLyric:[],lyricTimeArr:[],loopBool:!1,showHidden:!0,audioBool:!0,playsNum:"0",plays:[{a:Object(n.jsx)(j.a,{}),b:"\u987a\u5e8f\u64ad\u653e"},{a:Object(n.jsx)(m.a,{}),b:"\u5355\u66f2\u5faa\u73af"},{a:Object(n.jsx)(b.a,{}),b:"\u968f\u673a\u64ad\u653e"}],lyricShow:"none",lyricBool:!1,transfroms:"rotateZ(0)",lyricStartTimer:"",lyricOverTimer:"",songNum:0,lyricShowHidden:"none",lyricImgShowHidden:"block",lyricOne:"",lyricIndex:0,tops:"0rem",totalDistanced:"0rem",startClient:0,endClient:0,moveClient:"",broadcast:[.75,1,1.25,1.5,2],broadCastOne:"1"},i}return Object(r.a)(s,[{key:"componentDidMount",value:function(){var t=this;this.listeren2=B.subscribe((function(){console.log(t.state.id.id,B.getState().songerSing.id);t.state.id.id,B.getState().songerSing.id,t.setState({id:B.getState().songerSing},(function(){void 0==t.state.id.id?t.setState({audioBool:!0}):t.setState({audioBool:!1}),t.setState({transfroms:"rotateZ(0)",animations:"shows 7s linear infinite forwards",shows:"inline",hiddens:"none"}),console.log(0x44f543d4e73cd),fetch("http://127.0.0.1:9999/Lyric?id="+t.state.id.id).then((function(t){return t.json()})).then((function(e){console.log(e);var s=e.lrc.lyric.match(/\[[^\[\]]*\]/g),n=[];s.forEach((function(t){n.push(t.substring(1,6))}));var i=e.lrc.lyric.match(/\][^\]\[]*\[/g),a=[];i.forEach((function(t){a.push(t.substring(t.indexOf("]")+1,t.indexOf("\n")))}));var c=[];n.forEach((function(t,e){c.push({timer:t,lyric:a[e]||""})})),c.forEach((function(t,e){""==t.lyric&&(c.splice(e,1),e--)})),console.log(c),t.setState({songTimes:n,songLyric:a,lyricTimeArr:c},(function(){console.log(t.state.songTimes,t.state.songLyric)}))})),fetch("http://127.0.0.1:9999/song/url?id="+t.state.id.id).then((function(t){return t.json()})).then((function(e){t.setState({songData:e.data[0]},(function(){}))})),fetch("http://127.0.0.1:9999/artists?id="+t.state.id.songSheetId,{method:"get"}).then((function(t){return t.json()})).then((function(e){console.log(e),t.setState({dataListArr:e.hotSongs||[]},(function(){console.log(t.state.dataList)}))})),fetch("http://127.0.0.1:9999/playlist/detail?id="+t.state.id.songSheetId).then((function(t){return t.json()})).then((function(e){console.log(e),e.msg||(String(e.playlist.playCount).length>4&&(e.playlist.playCount=String(e.playlist.playCount).substr(0,String(e.playlist.playCount).length-4)+"\u4e07"),console.log(e.playlist.tracks),t.setState({dataList:e.playlist.tracks||[]}))}));var e=document.querySelector("audio");e.load(),e.oncanplay=function(){setTimeout((function(){console.log(Math.floor(e.duration));var s,n=Math.floor(e.duration),i=0,a=0;e.addEventListener("timeupdate",(function(){var c=(s=Math.floor(e.currentTime))/n*12+"rem";(i=Math.floor(s/60))<10&&(i="0"+String(i)),(a=Math.floor(s%60))<10&&(a="0"+String(a)),t.setState({lyricStartTimer:i+":"+a,totalDistanced:c},(function(){t.state.lyricTimeArr.forEach((function(e,s){e.timer==t.state.lyricStartTimer&&t.setState({lyricOne:e.lyric,lyricIndex:s})}))}))})),console.log(i,a);var c=Math.floor(Math.floor(e.duration)/60),l=Math.floor(e.duration)%60;l<10&&(l="0"+String(l)),t.setState({lyricOverTimer:c+":"+l})}))}}))}))}},{key:"componentWillUnmount",value:function(){this.listeren2()}},{key:"clicks",value:function(){alert("\u7528\u6237\u4e2d\u5fc3\u6b63\u5728\u5f00\u53d1\u4e2d\uff0c\u656c\u8bf7\u671f\u5f85:)")}},{key:"playOut",value:function(t){t.stopPropagation(),this.setState({shows:"inline",hiddens:"none",animations:"shows 7s linear infinite forwards",transfroms:"rotateZ(0)",Bool:!0}),document.querySelector("audio").play()}},{key:"pauseOut",value:function(t){t.stopPropagation(),this.setState({shows:"none",hiddens:"inline",animations:"shows 7s linear infinite forwards paused",transfroms:"rotateZ(-30deg)",Bool:!1}),document.querySelector("audio").pause()}},{key:"playNum",value:function(t){var e=this;switch(++t>2&&(t=0),t){case 0:this.setState({songNum:0,loopBool:!1});break;case 1:this.setState({songNum:1,loopBool:!0});break;case 2:this.setState({songNum:2,loopBool:!1});break;default:alert("\u6b4c\u66f2\u64ad\u653e\u6a21\u5f0f\u9519\u8bef"),t=0}this.setState({playsNum:t},(function(){console.log(e.state.songNum,e.state.loopBool)}))}},{key:"randomNum",value:function(){var t=this;this.setState({loopBool:!1,lyricTimeTransition:"",lyricTimeTransform:"translateX(0)"});var e=Math.floor(Math.random()*this.state.dataList.length);console.log(e),this.state.dataList.forEach((function(s,n){e==n&&(console.log(s),B.dispatch(I(s.id,t.state.id.songSheetId,s.name,s.ar[0].name,s.al.picUrl)))}))}},{key:"menuOutLine",value:function(t){t.stopPropagation(),this.setState({showHidden:!1})}},{key:"masked",value:function(){this.setState({showHidden:!0})}},{key:"delSong",value:function(t){this.state.dataList.splice(t,1),this.setState({dataList:this.state.dataList})}},{key:"toLyric",value:function(){this.setState({lyricShow:"block",lyricBool:!0})}},{key:"gotoUp",value:function(){this.setState({lyricBool:!1})}},{key:"prevSong",value:function(){var t=this;console.log(this.state.dataList);var e=0;this.state.dataList.forEach((function(s,n){s.id==t.state.id.id&&(console.log(n),e=n-1)})),console.log(e),this.state.dataList.forEach((function(s,n){n==e&&B.dispatch(I(s.id,t.state.id.songSheetId,s.name,s.ar[0].name,s.al.picUrl))})),this.setState({transfroms:"rotateZ(0)",shows:"inline",hiddens:"none",loopBool:!1})}},{key:"nextSong",value:function(){var t=this,e=0;this.state.dataList.forEach((function(s,n){s.id==t.state.id.id&&(console.log(n),e=n+1)})),console.log(e),this.state.dataList.forEach((function(s,n){n==e&&B.dispatch(I(s.id,t.state.id.songSheetId,s.name,s.ar[0].name,s.al.picUrl))})),this.setState({transfroms:"rotateZ(0)",shows:"inline",hiddens:"none",loopBool:!1})}},{key:"lyricImgHidden",value:function(){this.setState({lyricImgShowHidden:"none",lyricShowHidden:"block"})}},{key:"lyricHidden",value:function(){this.setState({lyricImgShowHidden:"block",lyricShowHidden:"none"})}},{key:"handleTouchStart",value:function(t){this.setState({startClient:t.touches[0].clientX})}},{key:"handleTouchMove",value:function(t){var e=this;this.setState({endClient:t.touches[0].clientX},(function(){var t=(e.state.endClient-e.state.startClient)/20,s=document.querySelector("audio"),n=t*s.duration/12;s.currentTime=n}))}},{key:"handleClick",value:function(t){console.log(t)}},{key:"boradCast",value:function(t){document.querySelector("audio").playbackRate=t,this.setState({broadCastOne:t})}},{key:"touchStartLyric",value:function(t){console.log(t.touches[0].clientY)}},{key:"touchMoveLyric",value:function(t){console.log(t.touches[0].clientY)}},{key:"titleA",value:function(t){this.setState({titles:t})}},{key:"render",value:function(){var t=this;return Object(n.jsxs)("div",{className:"home",children:[Object(n.jsxs)("header",{className:"header",children:[Object(n.jsx)(p.a,{onClick:function(){return t.clicks()}}),Object(n.jsx)("span",{children:"\u4e91\u97f3\u60a6"}),Object(n.jsx)(l.b,{to:"/search",children:Object(n.jsx)(f.a,{})})]}),Object(n.jsxs)("div",{className:"main",children:[Object(n.jsx)(l.b,{to:"/recommend",className:"\u63a8\u8350"==this.state.titles?"titleName":"",onClick:function(){return t.titleA("\u63a8\u8350")},children:"\u63a8\u8350"}),Object(n.jsx)(l.b,{to:"/singers",className:"\u6b4c\u624b"==this.state.titles?"titleName":"",onClick:function(){return t.titleA("\u6b4c\u624b")},children:"\u6b4c\u624b"}),Object(n.jsx)(l.b,{to:"/rank",className:"\u6392\u884c\u699c"==this.state.titles?"titleName":"",onClick:function(){return t.titleA("\u6392\u884c\u699c")},children:"\u6392\u884c\u699c"})]}),Object(n.jsxs)("section",{className:"botton",style:{marginBottom:this.state.audioBool?"0rem":"3rem"},children:[Object(n.jsx)(u.b,{path:"/",exact:!0,render:function(){return Object(n.jsx)(u.a,{to:"/recommend"})}}),Object(n.jsx)(u.b,{path:"/recommend",component:A}),Object(n.jsx)(u.b,{path:"/singers",component:R}),Object(n.jsx)(u.b,{path:"/rank",component:V}),Object(n.jsx)(u.b,{path:"/search",component:W}),Object(n.jsx)(u.b,{path:"/recommend/listDetails/:id",component:H}),Object(n.jsx)(u.b,{path:"/singers/singersDetails/:id",component:Y}),Object(n.jsx)(u.b,{path:"/rank/RankDetails/:id",component:Z})]}),Object(n.jsxs)("div",{className:"home-audio",style:{display:this.state.audioBool?"none":"block"},onClick:function(){return t.toLyric()},children:[Object(n.jsx)("img",{src:this.state.id.songImg,alt:"",style:{animation:this.state.animations}}),Object(n.jsxs)("div",{children:[Object(n.jsx)("p",{children:this.state.id.singerName}),Object(n.jsx)("p",{children:this.state.id.songerName})]}),Object(n.jsxs)("div",{children:[Object(n.jsx)(O.a,{onClick:function(e){return t.playOut(e)},style:{display:this.state.hiddens}}),Object(n.jsx)(g.a,{onClick:function(e){return t.pauseOut(e)},style:{display:this.state.shows}}),Object(n.jsx)(p.a,{onClick:function(e){return t.menuOutLine(e)}})]})]}),Object(n.jsx)("div",{className:"songList-song",style:{height:this.state.showHidden?"0":"100%"},onClick:function(){return t.masked()}}),Object(n.jsxs)("ul",{className:"songList",style:{height:this.state.showHidden?"0":"25rem"},children:[Object(n.jsxs)("div",{children:[this.state.plays.map((function(e,s){return Object(n.jsxs)("span",{style:{display:t.state.playsNum==s?"inline":"none"},onClick:function(){return t.playNum(s)},children:[Object(n.jsx)("span",{children:e.a}),e.b]},s)})),Object(n.jsx)(x.a,{})]}),this.state.dataList.map((function(e,s){return Object(n.jsxs)("li",{children:[Object(n.jsxs)("span",{children:[e.al.name," - ",e.ar[0].name]}),Object(n.jsx)(x.a,{onClick:function(){return t.delSong(s)}}),Object(n.jsx)(y.a,{})]},e.id)})),this.state.dataListArr.map((function(e,s){return Object(n.jsxs)("li",{children:[Object(n.jsxs)("span",{children:[e.al.name," - ",e.ar[0].name]}),Object(n.jsx)(x.a,{onClick:function(){return t.delSong(s)}}),Object(n.jsx)(y.a,{})]},e.id)}))]}),Object(n.jsx)(T.a,{in:this.state.lyricBool,timeout:400,classNames:"lyricShows",children:Object(n.jsxs)("div",{className:"lyric",style:{display:this.state.lyricShow},children:[Object(n.jsx)("img",{className:"lyric-background",src:this.state.id.songImg,alt:""}),Object(n.jsxs)("header",{className:"lyric-header",children:[Object(n.jsx)(v.a,{onClick:function(){return t.gotoUp()}}),Object(n.jsxs)("div",{children:[Object(n.jsx)("p",{children:this.state.id.singerName}),Object(n.jsx)("p",{children:this.state.id.songerName})]})]}),Object(n.jsxs)("div",{className:"lyric-img",style:{display:this.state.lyricImgShowHidden},onClick:function(){return t.lyricImgHidden()},children:[Object(n.jsx)("img",{src:P,alt:"",style:{animation:this.state.animations}}),Object(n.jsx)("img",{src:X,style:{transform:this.state.transfroms}}),Object(n.jsx)("img",{src:this.state.id.songImg,style:{animation:this.state.animations}}),Object(n.jsx)("p",{children:this.state.lyricOne})]}),Object(n.jsx)("div",{className:"lyric-lyric",style:{display:this.state.lyricShowHidden},onClick:function(){return t.lyricHidden()},children:Object(n.jsx)("ul",{onTouchStart:function(e){return t.touchStartLyric(e)},onTouchMove:function(e){return t.touchMoveLyric(e)},style:{top:this.state.lyricIndex>7?1.5*-(this.state.lyricIndex-7)+"rem":"0rem"},children:this.state.lyricTimeArr.map((function(e,s){return Object(n.jsx)("li",{className:t.state.lyricIndex==s?"lyricOnce":"",children:e.lyric},s)}))})}),Object(n.jsxs)("div",{className:"lyric-speed",children:[Object(n.jsx)("span",{children:"\u500d\u901f\u542c\u6b4c"}),this.state.broadcast.map((function(e,s){return Object(n.jsxs)("span",{className:t.state.broadCastOne==e?"borad-cast":"",onClick:function(){return t.boradCast(e)},children:["x",e]},e)}))]}),Object(n.jsxs)("div",{className:"lyric-time",children:[Object(n.jsx)("span",{children:this.state.lyricStartTimer}),Object(n.jsxs)("span",{onClick:function(e){return t.handleClick(e)},children:[Object(n.jsx)("i",{style:{width:this.state.totalDistanced}}),Object(n.jsx)("i",{onTouchStart:function(e){return t.handleTouchStart(e)},onTouchMove:function(e){return t.handleTouchMove(e)},style:{left:this.state.totalDistanced}})]}),Object(n.jsx)("span",{children:this.state.lyricOverTimer})]}),Object(n.jsxs)("div",{className:"lyric-handle",children:[Object(n.jsx)("div",{children:this.state.plays.map((function(e,s){return Object(n.jsx)("span",{style:{display:t.state.playsNum==s?"inline":"none"},onClick:function(){return t.playNum(s)},children:Object(n.jsx)("span",{children:e.a})},s)}))}),Object(n.jsx)(k.a,{onClick:function(){return t.prevSong()}}),Object(n.jsxs)("span",{children:[Object(n.jsx)(O.a,{onClick:function(e){return t.playOut(e)},style:{display:this.state.hiddens}}),Object(n.jsx)(g.a,{onClick:function(e){return t.pauseOut(e)},style:{display:this.state.shows}})]}),Object(n.jsx)(S.a,{onClick:function(){return t.nextSong()}}),Object(n.jsx)(p.a,{onClick:function(e){return t.menuOutLine(e)}})]}),Object(n.jsx)("p",{})]})}),Object(n.jsx)("audio",{src:this.state.songData.url,onEnded:0==this.state.songNum?function(){return t.nextSong()}:function(){return t.randomNum()},autoPlay:!0,loop:this.state.loopBool,children:"\u60a8\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301 audio \u6807\u7b7e\u3002"})]})}}]),s}(i.Component),J=Object(u.f)(F);var G=function(){return Object(n.jsx)("div",{className:"App",children:Object(n.jsx)(l.a,{children:Object(n.jsx)(J,{})})})};s(55),s(56),s(57);c.a.render(Object(n.jsx)(G,{}),document.getElementById("root"))}},[[58,1,2]]]);
//# sourceMappingURL=main.94025956.chunk.js.map